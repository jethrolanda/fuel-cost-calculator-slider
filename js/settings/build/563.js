"use strict";(self.webpackChunksettings=self.webpackChunksettings||[]).push([[563],{4563:function(e,t,a){a.r(t);var l=a(9196),r=a.n(l),n=a(7773),s=a(1249),o=a(1127),i=a(5187),c=a(7591),m=a(5460),u=a(2862),d=a(1260),p=a(6570),g=a(6755),E=a(3171),f=a(4746),h=a(7763),C=a.n(h),y=a(942),k=a(5998),_=a(3461);t.default=r().memo((()=>{const[e,t]=(0,l.useState)(""),[a,r]=(0,l.useState)(""),h=(0,l.useRef)(null),w=(e,a,l)=>{a(),t(e[0]),r(l)},[S,Z]=(0,l.useState)(!1),[v,D]=(0,l.useState)(!1),[x,F]=(0,l.useState)(""),[P,I]=n.Z.useNotification(),b=(e,t,a)=>{P[e]({message:t,description:a})},z=(0,k.I0)();let T=(0,k.v9)(y.CL),L=(0,k.v9)(y.PF),N=(0,k.v9)(y.oA);const R=n=>({filterDropdown:({setSelectedKeys:e,selectedKeys:a,confirm:c,clearFilters:m,close:u})=>(0,l.createElement)("div",{style:{padding:8},onKeyDown:e=>e.stopPropagation()},(0,l.createElement)(s.Z,{ref:h,placeholder:`Search ${n}`,value:a[0],onChange:t=>e(t.target.value?[t.target.value]:[]),onPressEnter:()=>w(a,c,n),style:{marginBottom:8,display:"block"}}),(0,l.createElement)(o.Z,null,(0,l.createElement)(i.ZP,{type:"primary",onClick:()=>w(a,c,n),icon:(0,l.createElement)(p.Z,null),size:"small",style:{width:90}},"Search"),(0,l.createElement)(i.ZP,{onClick:()=>m&&(e=>{e(),t("")})(m),size:"small",style:{width:90}},"Reset"),(0,l.createElement)(i.ZP,{type:"link",size:"small",onClick:()=>{c({closeDropdown:!1}),t(a[0]),r(n)}},"Filter"),(0,l.createElement)(i.ZP,{type:"link",size:"small",onClick:()=>{u()}},"close"))),filterIcon:e=>(0,l.createElement)(p.Z,{style:{color:e?"#1677ff":void 0}}),onFilter:(e,t)=>t[n].toString().toLowerCase().includes(e.toLowerCase()),onFilterDropdownOpenChange:e=>{e&&setTimeout((()=>h.current?.select()),100)},render:t=>a===n?(0,l.createElement)(C(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e],autoEscape:!0,textToHighlight:t?t.toString():""}):t}),$=[{title:"Customer Name",dataIndex:"customer_name",key:"customer_name",sorter:(e,t)=>e.customer_name.localeCompare(t.customer_name),...R("customer_name")},{title:"Customer Email",dataIndex:"customer_email",key:"customer_email",sorter:(e,t)=>e.customer_email.localeCompare(t.customer_email),...R("customer_email")},{title:"Salesperson Name",dataIndex:"salesperson_name",key:"salesperson_name",sorter:(e,t)=>e.salesperson_name.localeCompare(t.salesperson_name),...R("salesperson_name")},{title:"Salesperson Email",dataIndex:"salesperson_email",key:"salesperson_email",sorter:(e,t)=>e.salesperson_email.localeCompare(t.salesperson_email),...R("salesperson_email")},{title:"Date",dataIndex:"date",key:"date",sorter:(e,t)=>new Date(e.date)-new Date(t.date)},{title:"Action",dataIndex:"pdf_url",key:"pdf_url",render:(e,t)=>(0,l.createElement)(l.Fragment,null,(0,l.createElement)(o.Z,null,(0,l.createElement)("a",{href:"#",onClick:()=>(e=>{F(e),D(!0)})(e)},(0,l.createElement)(g.Z,null)),(0,l.createElement)(c.Z,{title:"Delete this item",description:"Are you sure to delete this item?",onConfirm:()=>{return e=t?.id,void z((0,y.wz)({id:e,cb:e=>{"success"===e?.status?b("success","Success",e?.message):b("error","Error",e?.message)}}));var e},okText:"Yes",cancelText:"No"},(0,l.createElement)("a",{href:"#"},(0,l.createElement)(E.Z,{style:{color:"red"}})))))}];return(0,l.useEffect)((()=>{!1===T&&(Z(!0),z((0,y.BM)({cb:e=>{Z(!1)}})))}),[T]),(0,l.createElement)(l.Fragment,null,I,(0,l.createElement)(m.Z,{orientation:"left",orientationMargin:"0"},"PDF Report"),(0,l.createElement)(_.CSVLink,{data:L,filename:"fuel-savings-report.csv",style:{float:"right",marginBottom:"15px"}},(0,l.createElement)(f.Z,null)," Download CSV"),(0,l.createElement)(u.Z,{loading:S,columns:$,dataSource:L,pagination:{...N,showTotal:(e,t)=>`${t[0]}-${t[1]} of ${e} items`,position:["bottomCenter"],onChange:(e,t)=>{z((0,y.Jr)({...N,current:e}))}}}),(0,l.createElement)(d.Z,{title:"PDF Report",open:v,onOk:()=>{D(!1)},onCancel:()=>{D(!1)},width:1200,footer:null},(0,l.createElement)("iframe",{src:x,width:"100%",height:"1056"})))}))}}]);